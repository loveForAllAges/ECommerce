{% extends 'base.html' %}

{% block content %}
<h1>Аккаунт</h1>
<p>{{ request.user.first_name }} {{ request.user.last_name }} - {{ request.user.email }} - {{ request.user.phone }} - Staff: {{ request.user.is_staff }} - Total orders: {{ object_list|length }}</p>
<a href="{% url 'password-change' %}">Изменить пароль</a>
<a href="{% url 'settings' %}">Настройки</a>
<h1>История заказов</h1>
{% for object in object_list %}
<div>{{ object }}</div>
<div>{{ object.product.name }}</div>
<div>{{ object.product.brand }}</div>
<div>{{ object.product.description }}</div>
<div>{{ object.product.category }}</div>
<div>{{ object.product.price }}</div>
<h4>Количество: {{ object.quantity }}</h4>
<h4>Общая цена: {{ object.get_total_price }}</h4>
{% for photo in object.product.photos %}
<img src="{{ photo.photo.url }}" alt="">
{% empty %}
<p>Нет фото</p>
{% endfor %}
{% empty %}
<p>Заказов нет</p>
{% endfor %}
<div class="">
    <h3>Мои адресы</h3>
    <ul>
        {% for address in addresses %}
        <li>{{ address.name }} -- 
            <a href="{% url 'address-update' address.id %}">Изменить</a>, 
            <button data-address="{{ address.id }}" class="deleteAddress">Удалить</button>
            <button data-address="{{ address.id }}" class="mainAddress">Сделать основным</button>
        </li>
        {% empty %}
        <li>Нет адресов</li>
        {% endfor %}
    </ul>
    <a href="{% url 'address-create' %}">Добавить адрес</a>
</div>
{% endblock %}
